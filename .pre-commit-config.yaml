repos:
  # Ruff - linter with auto-fix
  - repo: local
    hooks:
      - id: ruff
        name: Ruff (Poetry venv)
        entry: poetry run ruff check
        language: system
        types: [python]
        pass_filenames: true   # default for most hooks

      - id: ruff-format
        name: Ruff autoformat (Poetry venv)
        entry: poetry run ruff format
        language: system
        types: [python]
        pass_filenames: true   # default for most hooks

      - id: ruff-fix
        name: Ruff (Poetry venv)
        entry: poetry run ruff check
        args: [ --fix, --extend-select, I ]
        language: system
        types: [python]
        pass_filenames: true   # default for most hooks

  # Mypy - type checker
  - repo: local
    hooks:
      - id: mypy
        name: Mypy (Poetry venv)
        entry: poetry run mypy
        language: system
        types: [python]
        pass_filenames: true   # default for most hooks

  # Pytest - run tests, enforce coverage, ignore "no tests collected"
  - repo: local
    hooks:
      - id: run-tests
        name: Run Pytest (Poetry venv)
        entry: bash scripts/run_tests.sh
        language: system
        types: [python]
        always_run: true
        pass_filenames: false
